#include "shell.h"

int main(char **environ)
{
char *line, **args, *full_path;
size_t len = 0;
pid_t pid;

while (1)
{
prompt();

if (getline(&line, &len, stdin) == -1)
break;

args = tokenize(line);

if (args == NULL || args[0] == NULL)
{
free(line);
free(args);
continue;
}

full_path = path(args, environ);

if (full_path == NULL)
printf("%s: command not found\n", args[0]);
else
{
pid = fork();

if (pid == -1)
perror("Error");

if (pid == 0)
{
execve(full_path, args, environ);
perror("Error");
exit(EXIT_FAILURE);
}
else
wait(NULL);

free(full_path);
}

free(line);
free(args);
}

return (0);
}
